% --- colour
\usepackage[table]{xcolor} % \textcolor, \definecolor
\definecolor{bilibili}{RGB}{251, 114, 153}
\definecolor{phub}{RGB}{255, 163, 26}
\definecolor{rcnngreen}{RGB}{34, 139, 34} % FROM: Mask R-CNN (https://arxiv.org/abs/1703.06870)
\definecolor{royalblue}{RGB}{0, 113, 188}
\definecolor{halfblue}{RGB}{0, 0, 128} % ICML citation blue

% Chinese colours
% https://cht-colors.pages.dev/painting/
% https://zhongguose.com/
% https://boxingp.github.io/traditional-chinese-colors/
% https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9B%BD%E4%BC%A0%E7%BB%9F%E8%89%B2%E5%BD%A9
\definecolor{azurite}{RGB}{22, 133, 169} % 石青 as light blue
\definecolor{carmine}{RGB}{157, 41, 51} % 胭脂
\definecolor{ccyan}{RGB}{0, 52, 114} % 花青 as dark blue
\definecolor{cinnabar}{RGB}{243, 104, 56} % 朱膘 as shadowed orange
\definecolor{gamboge}{RGB}{255, 182, 30} % 藤黄 as gold
\definecolor{ink}{RGB}{80, 97, 109} % 墨 as black
\definecolor{malachite}{RGB}{22, 169, 81} % 石绿/孔雀石 as green
\definecolor{ochre}{RGB}{132, 90, 51} % 赭黄 as light brown
\definecolor{orpiment}{RGB}{255, 198, 75} % 雌黄 as light yellow
\definecolor{realgar}{RGB}{233, 187, 29} % 雄黄/鸡冠石 as shadow yellow
\definecolor{ricepaper}{RGB}{232, 232, 220} % 宣纸 as background
\definecolor{vermilion}{RGB}{255, 78, 32} % 朱砂/丹 as red orange

% matplotlib.pyplot.rcParams['axes.prop_cycle'].by_key()['color']
\definecolor{mpl0}{HTML}{1f77b4}
\definecolor{mpl1}{HTML}{ff7f0e}
\definecolor{mpl2}{HTML}{2ca02c}
\definecolor{mpl3}{HTML}{d62728}
\definecolor{mpl4}{HTML}{9467bd}
\definecolor{mpl5}{HTML}{8c564b}
\definecolor{mpl6}{HTML}{e377c2}
\definecolor{mpl7}{HTML}{7f7f7f}
\definecolor{mpl8}{HTML}{bcbd22}
\definecolor{mpl9}{HTML}{17becf}

% functional colour aliases: align fake cite & ref with real ones
\colorlet{citecolor}{royalblue}% \cite <-> \fcite
\colorlet{linkcolor}{red}% \ref <-> \fref

% --- encoding
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

% --- algorithm
\usepackage{algorithm}
\usepackage{algorithmic}
% \usepackage{algpseudocode}
% \usepackage[ruled,vlined]{algorithm2e}

% Customise strings in algorithmic:
%   \REQUIRE: `Require:' -> `Input:'
%   \ENSURE: `Ensure:' -> `Output:'
\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}
% Customise comment format in algorithmic
\renewcommand{\algorithmiccomment}[1]{\hfill\textcolor{gray}{$\blacktriangleright$ \textit{#1}}}

% --- code
\usepackage{listings}

% --- figure
\usepackage{graphicx} % \resizebox
%\usepackage{subfigure}
\usepackage{subcaption} % use it to include subfigure
% wrap figure / table
\usepackage{wrapfig}

% --- table
\usepackage{bigstrut}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{extarrows}
\usepackage{makecell}
\usepackage{multirow}
\usepackage{colortbl} % \cellcolor
\usepackage{pgfplotstable} % dynamically colour cells according to their value (with custom colouring command)

% --- math
\usepackage{amsmath,amssymb,amsfonts,amsthm}
% \usepackage{bm} % defines \bm
\usepackage{mathtools} % hollow char
\usepackage{stmaryrd} % hollow bracket

% argmax, argmin
\DeclareMathOperator*{\argmin}{\arg\min}
\DeclareMathOperator*{\argmax}{\arg\max}
% paired delimiter, add `*' to enable auto-sizing, e.g.
%     \paren{x} -> (x)
%     \paren*{x} -> \left( x \right)
\DeclarePairedDelimiter{\iverson}{\llbracket}{\rrbracket} % Iverson bracket
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\paren}{(}{)} % PARENtheses
\DeclarePairedDelimiter{\sbrk}{[}{]} % Square BRacKets
\DeclarePairedDelimiter{\cbrk}{\{}{\}} % Curly BRacKets
\DeclarePairedDelimiter{\card}{|}{|} % CARDinality
\DeclarePairedDelimiter{\norm}{\|}{\|}
% bm
\providecommand{\bm}{\boldsymbol}

% --- symbol
\usepackage{pifont} % \ding{51} (✓), \ding{55} (✗)
\usepackage{pmboxdraw} % \textSFii (└), \textSFviii (├), \textSFx (─)
% \texttimes (×), \textdiv (÷), \textpm (±), \textdegree (°),
% \textdagger (†), \textdaggerdbl (‡), \textparagraph (¶), \textmusicalnote (♪)
\usepackage{textcomp}

% --- text
\usepackage{soul} % \st: stridethrough text
\usepackage{lipsum} % generate dummy text

% --- table of content
\usepackage{etoc}

% --- misc
\usepackage{xspace}
%\usepackage{xparse} % parsing multiple arguments in custom commands

% --- reference
\usepackage[capitalize]{cleveref}
\Crefname{section}{Section}{Sections}
\Crefname{table}{Table}{Tables}
\Crefname{figure}{Figure}{Figures}

\crefname{section}{Sec.}{Secs.}
\crefname{table}{Tab.}{Tabs.}
\crefname{figure}{Fig.}{Figs.}

% Unify ref
\renewcommand{\figurename}{Figure}
\renewcommand{\tablename}{Table}

% Easy reference of figure, table, section
% - `\eqref': built in the `amsmath' package
% - `\nameref': built in the `nameref' package
% - `\pageref': built-in
\newcommand{\algref}[1]{Alg.~\ref{#1}}
\newcommand{\Algref}[1]{Algorithm~\ref{#1}}
\newcommand{\eqnref}[1]{Eq.~\eqref{#1}}
\newcommand{\Eqnref}[1]{Equation~\eqref{#1}}
\newcommand{\figref}[1]{Fig.~\ref{#1}}
\newcommand{\Figref}[1]{\figurename~\ref{#1}}
\newcommand{\secref}[1]{\S\ref{#1}}
\newcommand{\Secref}[1]{Section~\ref{#1}}
\newcommand{\tabref}[1]{Tab.~\ref{#1}}
\newcommand{\Tabref}[1]{\tablename~\ref{#1}}

% Fake \cite & \ref
% In rebuttal, when you want to \cite or \ref something from the paper
% but you can't have real cross-reference cuz it is in another separate file,
% use hand-craft style to mimic them.
\newcommand{\fref}[1]{\textcolor{linkcolor}{#1}} % mod reference colour here to match \ref
\newcommand{\falgref}[1]{(Alg.~\fref{#1})}
\newcommand{\feqref}[1]{(\fref{#1})}
\newcommand{\feqnref}[1]{Eq.~\feqref{#1}}
\newcommand{\ffigref}[1]{Fig.~\fref{#1}}
\newcommand{\fsecref}[1]{\S\fref{#1}}
\newcommand{\ftabref}[1]{Tab.~\fref{#1}}
\newcommand{\fpgref}[1]{p.~\fref{#1}} % page
\newcommand{\fpgsref}[2]{pp.~\fref{#1}-\fref{#2}} % page range
\newcommand{\flnref}[1]{l.~\fref{#1}} % line
\newcommand{\flnsref}[2]{ll.~\fref{#1}-\fref{#2}} % line range
\makeatletter
\newcommand{\fcite}[1]{[\@fcite#1,\@nil]}
\def\@fcite#1,#2\@nil{%
  \textcolor{citecolor}{#1}% mod citation colour here to match \cite
  \ifx\@nil#2\@nil\else,\@fcite#2\@nil\fi%
}
\makeatother

%--- journal revision highlighting
% Usage: \revise{1}{TEXT 1}, \revise{2}{TEXT 2}
% #1: revision number, hide #2 if negative
% #2: text to be highlighted
\newcommand{\revise}[2]{%
  \ifnum#1<0% negative: hide the text
    % (output nothing)
  \else\ifnum#1=1% <- adapt revision num here
    \textcolor{red}{#2}%
  \else
    #2% as-is
  \fi\fi
}

% --- quotation with background colour
\usepackage[most]{tcolorbox}

\newenvironment{bgquote}
{
  \begin{tcolorbox}[
    enhanced,
    colback=gray!7,         % Light gray background
    colframe=gray!7,        % Same color frame
    arc=7pt,                % Rounded/sharp corners
    rounded corners=east,
    sharp corners=west,
    left=0pt,               % Extra left padding
    right=0pt,              % Extra right padding
    top=2pt,                % Top padding
    bottom=5pt,             % Bottom padding
    borderline west={3pt}{0pt}{gray!20},
  ]
  \begin{quote}
  \itshape % italic text
}
{\end{quote}\end{tcolorbox}}

%--- list
\usepackage{enumitem}

% --- hyperref (at last?)
\usepackage[
  pagebackref,
  breaklinks,
  colorlinks,
  bookmarks=true,
  citecolor=citecolor,
  % linkcolor=linkcolor,
]{hyperref}


% abbreviations ending with `.'
\makeatletter
\DeclareRobustCommand\onedot{\futurelet\@let@token\@onedot}
\def\@onedot{\ifx\@let@token.\else.\null\fi\xspace}
\def\aka{\emph{a.k.a}\onedot}
\def\eg{\emph{e.g}\onedot} \def\Eg{\emph{E.g}\onedot}
\def\ie{\emph{i.e}\onedot} \def\Ie{\emph{I.e}\onedot}
\def\viz{\emph{viz}\onedot}
\def\cf{\emph{cf}\onedot} \def\Cf{\emph{Cf}\onedot}
\def\etc{\emph{etc}\onedot}
\def\vs{\emph{vs}\onedot} % versus: `vs.' not `v.s.'
\def\wrt{w.r.t\onedot}
\def\dof{d.o.f\onedot}
\def\iid{i.i.d\onedot}
\def\wolog{w.l.o.g\onedot}
\def\etal{\emph{et al}\onedot}
\makeatother
